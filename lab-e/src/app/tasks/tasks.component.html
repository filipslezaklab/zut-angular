<div class="top">
  <form id="new-task" [formGroup]="newTaskForm" (ngSubmit)="handleNewTaskSubmit()">
    <mat-form-field>
      <mat-label>Title</mat-label>
      <input matInput id="title" formControlName="title" required />
      <mat-hint>At least 1 character.</mat-hint>
    </mat-form-field>
    <mat-form-field>
      <mat-label>Deadline</mat-label>
      <input matInput [matDatepicker]="picker" id="deadline" formControlName="deadline" />
      <mat-datepicker #picker></mat-datepicker>
      <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-hint>Optional</mat-hint>
    </mat-form-field>
    <button mat-raised-button color="primary" type="submit" [disabled]="loading || !newTaskForm.valid">{{ loading ?
      'Processing...' : 'Add
      Task'}}</button>
  </form>
  <button mat-raised-button color="accent" type="button" [disabled]="!canArchive()" (click)="archive()">Archive
    completed</button>
</div>
<ul id="tasks-list">
  <li *ngFor="let task of tasks">
    <mat-card class="task" (click)="complete(task)">
      <p class="title">Title: {{ task.title }}</p>
      <p class="date" *ngIf="task.deadline">{{ task.deadline | date:'YYYY-MM-dd' }}</p>
      <mat-checkbox [checked]="task.completed" (change)="complete(task)"></mat-checkbox>
    </mat-card>
  </li>
</ul>